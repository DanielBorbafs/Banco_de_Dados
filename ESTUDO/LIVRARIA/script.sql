

CREATE DATABASE LIVRARIA
GO

USE LIVRARIA 
GO

CREATE TABLE PESSOAS(
	ID_USUARIO INT IDENTITY(1,1) PRIMARY KEY,
	NOME VARCHAR(30),
	TELEFONE VARCHAR(20),
	EMAIL VARCHAR (60)
)
GO

CREATE TABLE LIVROS (
	ID_LIVRO INT IDENTITY(1,1) PRIMARY KEY,
	TITULO VARCHAR(30),
	AUTOR VARCHAR(30),
	GENERO CHAR(1),
	ANO_PUBLICACAO DATE
)
GO


CREATE TABLE EMPRESTIMO(
	ID_EMPRESTIMO INT IDENTITY (1,1) PRIMARY KEY,
	ID_USUARIO INT,
	ID_LIVRO INT,
	DATA_EMPRESTIMO DATE,
	DATA_DEVOLUCAO DATE
)
GO

ALTER TABLE EMPRESTIMO
ADD CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO)
REFERENCES PESSOAS(ID_USUARIO)
GO


ALTER TABLE EMPRESTIMO 
ADD CONSTRAINT FK_ID_LIVRO FOREIGN KEY (ID_LIVRO)
REFERENCES LIVROS(ID_LIVRO)
GO

USE LIVRARIA 
GO

-- inserts pessoas

INSERT INTO PESSOAS VALUES ('JOÃO', '279984512', 'JOAO@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('MARIA', '279987513', 'MARIA@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('CARLOS', '279987514', 'CARLOS@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('ANA', '279987515', 'ANA@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('LUCAS', '279987516', 'LUCAS@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('FERNANDA', '279987517', 'FERNANDA@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('PEDRO', '279987518', 'PEDRO@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('BEATRIZ', '279987519', 'BEATRIZ@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('RAFAEL', '279987520', 'RAFAEL@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('GABRIELA', '279987522', 'GABRIELA@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('MARCOS', '279987523', 'MARCOS@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('JULIANA', '279987524', 'JULIANA@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('ANDRÉ', '279987525', 'ANDRE@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('PATRÍCIA', '279987526', 'PATRICIA@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('ROBERTO', '279987527', 'ROBERTO@GMAIL.COM');
INSERT INTO PESSOAS VALUES ('MARCELA', '279987528', 'MARCELA@GMAIL.COM');
GO

select * from pessoas 
go


-- insert livros
INSERT INTO LIVROS VALUES ('1984', 'GEORGE ORWELL', 'DISTOPIA', '1949');
INSERT INTO LIVROS VALUES ('O SENHOR DOS ANÉIS', 'J.R.R. TOLKIEN', 'FANTASIA', '1954');
INSERT INTO LIVROS VALUES ('O PEQUENO PRÍNCIPE', 'ANTOINE DE SAINT-EXUPÉRY', 'FÁBULA', '1943');
INSERT INTO LIVROS VALUES ('ORGULHO E PRECONCEITO', 'JANE AUSTEN', 'ROMANCE', '1813');
INSERT INTO LIVROS VALUES ('MOBY DICK', 'HERMAN MELVILLE', 'AVENTURA', '1851');
INSERT INTO LIVROS VALUES ('GUERRA E PAZ', 'LIEV TOLSTÓI', 'ROMANCE', '1869');
INSERT INTO LIVROS VALUES ('CRIME E CASTIGO', 'FIÓDOR DOSTOIÉVSKI', 'ROMANCE', '1866');
INSERT INTO LIVROS VALUES ('O GRANDE GATSBY', 'F. SCOTT FITZGERALD', 'ROMANCE', '1925');
INSERT INTO LIVROS VALUES ('DOM QUIXOTE', 'MIGUEL DE CERVANTES', 'ROMANCE', '1605');
INSERT INTO LIVROS VALUES ('A METAMORFOSE', 'FRANZ KAFKA', 'FICÇÃO', '1915');
INSERT INTO LIVROS VALUES ('O SOL É PARA TODOS', 'HARPER LEE', 'DRAMA', '1960');
INSERT INTO LIVROS VALUES ('AS CRÔNICAS DE NÁRNIA', 'C.S. LEWIS', 'FANTASIA', '1950');
INSERT INTO LIVROS VALUES ('O DIÁRIO DE ANNE FRANK', 'ANNE FRANK', 'BIOGRAFIA', '1947');
INSERT INTO LIVROS VALUES ('O APANHADOR NO CAMPO DE CENTEIO', 'J.D. SALINGER', 'ROMANCE', '1951');
INSERT INTO LIVROS VALUES ('JURASSIC PARK', 'MICHAEL CRICHTON', 'FICÇÃO CIENTÍFICA', '1990');
INSERT INTO LIVROS VALUES ('O CÓDIGO DA VINCI', 'DAN BROWN', 'SUSPENSE', '2003');
GO

SELECT * FROM LIVROS 
GO


-- insert emprestimos
INSERT INTO EMPRESTIMO VALUES (1003, 1003, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1004, 1004, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1005, 1005, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1006, 1006, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1007, 1007, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1008, 1008, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1009, 1009, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1010, 1010, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1011, 1011, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1012, 1012, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1013, 1013, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1014, 1014, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1015, 1015, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1016, 1016, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1017, 1017, '2024-06-18', '2024-06-20');
INSERT INTO EMPRESTIMO VALUES (1018, 1018, '2024-06-18', '2024-06-20');
GO

SELECT * FROM EMPRESTIMO
GO

/* QUEM PEGOU LIVROS EMPRESTADOS COM O TEMA DE ROMANCE */
SELECT P.NOME, P.TELEFONE, L.TITULO, L.GENERO, L.AUTOR
FROM PESSOAS P
INNER JOIN LIVROS L ON P.ID_USUARIO = L.ID_LIVRO
WHERE L.GENERO = 'ROMANCE';
GO

